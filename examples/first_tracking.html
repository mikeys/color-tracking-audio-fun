<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>tracking.js - first tracking</title>
  <link rel="stylesheet" href="assets/demo.css">
  <script src="../build/tracking-min.js"></script>
  <style>
    #canvas,
    #video {
      width: 400px;
      height: 300px;
      position: absolute;
    }

    .draw-frame {
      width: 400px;
      height: 300px;
      border: 1px solid #ccc;
      top: 50%;
      left: 50%;
      position: absolute;
      margin: -207px 0 0 -200px;
    }
  </style>
</head>
<body>
  <div class="draw-frame">
    <video id="video" width="400" height="300" preload autoplay loop muted></video>
    <canvas id="canvas" width="400" height="300"></canvas>
  </div>
  <script>
  var colors = new tracking.ColorTracker(['magenta']);
  var canvas = document.getElementById('canvas');
  var context = canvas.getContext('2d');
  var currentRect = {};

  colors.on('track', function(event) {
    if (event.data.length === 0) {
      // No colors were detected in this frame.
    } else {
      console.log(event.data.length)
      event.data.forEach(function(rect) {
        context.clearRect(0, 0, canvas.width, canvas.height)
        context.beginPath();

        context.rect(rect.x, rect.y, rect.width, rect.height);
        console.log(rect);

        var centerPoint = Point.centerOf(rect);
        context.fillRect(centerPoint.x, centerPoint.y, 1, 1);
        console.log(centerPoint);

        context.stroke();
        context.closePath();
      });
    }
  });

  tracking.track('#video', colors, { camera: true });

  Point = function(x, y) {
    this.x = x;
    this.y = y
  }

  Point.centerOf = function(rect) {
    return new Point(rect.x + (rect.width / 2), rect.y + (rect.height / 2))
  }

  </script>
</body>
</html>
